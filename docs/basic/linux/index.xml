<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>1.1 Linux on Linux 学习笔记</title><link>https://kingye.me/study-linux/docs/basic/linux/</link><description>Recent content in 1.1 Linux on Linux 学习笔记</description><generator>Hugo</generator><language>en</language><atom:link href="https://kingye.me/study-linux/docs/basic/linux/index.xml" rel="self" type="application/rss+xml"/><item><title>用户</title><link>https://kingye.me/study-linux/docs/basic/linux/user/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://kingye.me/study-linux/docs/basic/linux/user/</guid><description>&lt;h1 id="linux-用户">
 Linux 用户
 &lt;a class="anchor" href="#linux-%e7%94%a8%e6%88%b7">#&lt;/a>
&lt;/h1>
&lt;h2 id="创建用户">
 创建用户
 &lt;a class="anchor" href="#%e5%88%9b%e5%bb%ba%e7%94%a8%e6%88%b7">#&lt;/a>
&lt;/h2>
&lt;h3 id="useradd">
 useradd
 &lt;a class="anchor" href="#useradd">#&lt;/a>
&lt;/h3>
&lt;p>useradd 是一个低级的、更基础的命令，几乎在所有的 Linux 发行版中都可以找到。
它提供了较少的默认设置，这意味着在创建用户时，你可能需要手动设置更多的选项，如用户的家目录、登录 shell、用户组等。
使用 useradd 时，通常需要配合其他命令，如 passwd 来设置用户密码。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># 不会创建同名目录&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># useradd xxx&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># 会在 /home 目录创建同名文件夹&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>useradd -m yewang
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>passwd yewang
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="adduser">
 adduser
 &lt;a class="anchor" href="#adduser">#&lt;/a>
&lt;/h3>
&lt;hr>
&lt;h2 id="设置-sudo-免密">
 设置 sudo 免密
 &lt;a class="anchor" href="#%e8%ae%be%e7%bd%ae-sudo-%e5%85%8d%e5%af%86">#&lt;/a>
&lt;/h2>
&lt;h3 id="对于-rhelcentossles12debianubuntu-系统">
 对于 RHEL/CentOS/SLES12/Debian/Ubuntu 系统
 &lt;a class="anchor" href="#%e5%af%b9%e4%ba%8e-rhelcentossles12debianubuntu-%e7%b3%bb%e7%bb%9f">#&lt;/a>
&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>cat &lt;span style="color:#e6db74">&amp;lt;&amp;lt; EOF &amp;gt; /etc/sudoers.d/yewang
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">yewang ALL=(ALL) NOPASSWD:ALL
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">EOF&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="对于-sles11-suse-linux-enterprise-server-系统">
 对于 SLES11 (&lt;code>SUSE Linux Enterprise Server&lt;/code>) 系统
 &lt;a class="anchor" href="#%e5%af%b9%e4%ba%8e-sles11-suse-linux-enterprise-server-%e7%b3%bb%e7%bb%9f">#&lt;/a>
&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>cat &lt;span style="color:#e6db74">&amp;lt;&amp;lt; EOF &amp;gt;&amp;gt; /etc/sudoers
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">yewang ALL=(ALL) NOPASSWD:ALL
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">EOF&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>---
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">## 删除用户&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">### userdel xxx&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>---
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">## 用户组&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">### 添加组&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>groupadd xxx
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">### 删除组&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>groupdel xxx
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>---
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">## 修改用户主目录&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>usermod -d /home/users/yewang -u uid yewang
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>问题：usermod user is currently used by process
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">### uid 获取&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>id 用户名
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>---
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">## 修改默认用户目录与默认 shell&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">```&lt;/span>shell
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>chmod +w /etc/passwd
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>vi /etc/passwd
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># id username&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># yewang:x:311272:100000:yewang:/home/user/yewang:/bin/zsh&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>chmod -w /etc/passwd
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="sudo-免密码">
 sudo 免密码
 &lt;a class="anchor" href="#sudo-%e5%85%8d%e5%af%86%e7%a0%81">#&lt;/a>
&lt;/h2>
&lt;ol>
&lt;li>
&lt;p>切换到 root 用户&lt;/p></description></item><item><title>时区</title><link>https://kingye.me/study-linux/docs/basic/linux/timezone/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://kingye.me/study-linux/docs/basic/linux/timezone/</guid><description>&lt;h1 id="时区">
 时区
 &lt;a class="anchor" href="#%e6%97%b6%e5%8c%ba">#&lt;/a>
&lt;/h1>
&lt;h2 id="设置时区">
 设置时区
 &lt;a class="anchor" href="#%e8%ae%be%e7%bd%ae%e6%97%b6%e5%8c%ba">#&lt;/a>
&lt;/h2>
&lt;p>CentOS 和 Ubuntu 的时区文件是 /etc/localtime，&lt;/p>
&lt;p>但是在 CentOS7 以后 localtime 变成了一个链接文件&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">[&lt;/span>root@centos7 ~&lt;span style="color:#f92672">]&lt;/span>&lt;span style="color:#75715e"># ll /etc/localtime&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>lrwxrwxrwx &lt;span style="color:#ae81ff">1&lt;/span> root root &lt;span style="color:#ae81ff">33&lt;/span> Oct &lt;span style="color:#ae81ff">12&lt;/span> 11:01 /etc/localtime -&amp;gt; /usr/share/zoneinfo/Asia/Shanghai
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="book-tabs">


&lt;input type="radio" class="toggle" name="tabs-uniqueid" id="tabs-uniqueid-0" checked="checked" />
&lt;label for="tabs-uniqueid-0">CentOS6、Ubuntu16&lt;/label>
&lt;div class="book-tabs-content markdown-inner">

```shell
$ cp /usr/share/zoneinfo/Asia/Shanghai /etc/localtime
```

&lt;/div>



&lt;input type="radio" class="toggle" name="tabs-uniqueid" id="tabs-uniqueid-1" />
&lt;label for="tabs-uniqueid-1">CentOS7、RHEL7、Scientific Linux 7、Oracle Linux 7&lt;/label>
&lt;div class="book-tabs-content markdown-inner">

最好的方法是使用 timedatectl 命令

```shell
$ timedatectl list-timezones |grep Shanghai #查找中国时区的完整名称
Asia/Shanghai
$ timedatectl set-timezone Asia/Shanghai #其他时区以此类推
```

或者直接手动创建软链接

```shell
$ ln -sf /usr/share/zoneinfo/Asia/Shanghai /etc/localtime
```

&lt;/div>



&lt;/div>

&lt;p>参考：&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://www.cnblogs.com/st-jun/p/7737188.html">Linux 修改时区的正确方法&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>磁盘</title><link>https://kingye.me/study-linux/docs/basic/linux/disk/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://kingye.me/study-linux/docs/basic/linux/disk/</guid><description>&lt;h1 id="磁盘">
 磁盘
 &lt;a class="anchor" href="#%e7%a3%81%e7%9b%98">#&lt;/a>
&lt;/h1>
&lt;h2 id="挂载磁盘">
 挂载磁盘
 &lt;a class="anchor" href="#%e6%8c%82%e8%bd%bd%e7%a3%81%e7%9b%98">#&lt;/a>
&lt;/h2>
&lt;p>开机自动挂载方法：&lt;/p>
&lt;ol>
&lt;li>&lt;code>lsblk&lt;/code> 查看磁盘情况&lt;/li>
&lt;li>&lt;code>vi /etc/fstab&lt;/code> 填写挂载&lt;/li>
&lt;li>&lt;code>mount -a&lt;/code> 生效&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># 显示机器当前磁盘&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>fdisk -l
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># 磁盘格式化为 ext4 的文件系统格式&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>mkfs.ext4 /dev/vdb
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># 手动挂载&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>mount /dev/vdb /home
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># 设置开机自动挂载&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>cat &lt;span style="color:#e6db74">&amp;lt;&amp;lt; &amp;#39;EOF&amp;#39; &amp;gt; /etc/fstab
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">/dev/vdb /home ext4 defaults 0 2
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">EOF&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>参考：&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://www.cnblogs.com/jyzhao/p/4778657.html">Linux 磁盘分区、格式化、目录挂载&lt;/a>&lt;/li>
&lt;/ul></description></item></channel></rss>